# Vehicle Profiles Directory

This directory stores vehicle-specific OBDb profiles generated by `obdb_scanner.py`.

## Purpose

Each vehicle has different OBD-II capabilities. Scanning once per vehicle:
- Detects which OBDb commands are supported
- Optimizes monitoring (only queries supported commands)
- Improves performance (avoids unsupported PIDs)
- Enables vehicle-specific AI analysis

## File Format

Profiles are named: `vehicle_{id}.json`

Example: `vehicle_1.json` for vehicle ID 1

## Profile Structure

```json
{
  "vehicle_id": 1,
  "vin": "WVW1234567890",
  "scan_timestamp": "2025-01-12T14:30:00",
  "protocol": "ISO 15765-4 (CAN 11/500)",
  "supported_commands": [
    "01 06",  // Short Term Fuel Trim
    "01 07",  // Long Term Fuel Trim
    "01 14",  // O2 Sensor B1S1
    // ... more commands
  ],
  "metadata": {
    "scanner_version": "1.0",
    "sentinel_pro_version": "10.0",
    "scan_duration_seconds": 180
  }
}
```

## Usage

### Scan a vehicle:
```bash
python obdb_scanner.py --vehicle-id 1 --port COM6
```

### Profile is used automatically:
When `obd_server.py` starts, it loads the profile for the active vehicle.

### Re-scan if needed:
- After ECU flash/update
- After vehicle modifications
- If new sensors added
- If profile seems inaccurate

## Notes

- **One profile per vehicle**: Each vehicle ID has its own profile
- **Persistent**: Profiles don't expire (re-scan if vehicle changes)
- **Optional**: System works without profiles (degraded mode)
- **Portable**: Profiles can be shared between SENTINEL PRO installations

## Troubleshooting

### Profile not found
If you see: `Profile not found: vehicle_profiles/vehicle_X.json`

**Solution**: Scan the vehicle first:
```bash
python obdb_scanner.py --vehicle-id X --port YOUR_PORT
```

### Outdated profile
If vehicle capabilities changed (ECU update, modifications):

**Solution**: Delete old profile and re-scan:
```bash
rm vehicle_profiles/vehicle_X.json
python obdb_scanner.py --vehicle-id X --port YOUR_PORT
```

## .gitignore

Vehicle profiles contain vehicle-specific data (VIN, etc.).
Consider adding to `.gitignore` if needed:

```
vehicle_profiles/*.json
!vehicle_profiles/README.md
```
